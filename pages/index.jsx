import Head from 'next/head'
import TeamSelector from '../components/TeamSelector'

import { useState } from 'react'
import NavBar from '../components/NavBar'

const teamsURL = 'https://www.balldontlie.io/api/v1/teams'

export default function LandingPage (teams) {
  const [teamName, setTeamName] = useState('Hawks')
  return (
    <div>
      <Head>
        <title>NBA-App</title>
        <link rel='icon' href='/Logo-NBA.png' />
        <meta name='description' content='Generated by create next app' />
      </Head>
      <NavBar teamName={teamName} />
      <TeamSelector setTeamName={setTeamName} teams={teams} />
    </div>
  )
}

export async function getServerSideProps () {
  const response = await fetch(teamsURL)
  const teams = await response.json()
  return {
    props: {
      teams
    }
  }
}
